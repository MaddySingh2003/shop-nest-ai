<div *ngIf="loading" class="text-center p-6">
  Loading order...
</div>

<div *ngIf="!loading && order" class="max-w-3xl mx-auto p-6 border rounded shadow">

  <h2 class="text-2xl font-bold mb-4">Order #{{order.id}}</h2>

  <!-- STATUS TRACKER -->
  <div class="flex items-center mb-6">

    <div class="status-step" [class.active]="isCompleted('CONFIRMED')">Confirmed</div>
    <div class="status-line" [class.active]="isCompleted('SHIPPED')"></div>

    <div class="status-step" [class.active]="isCompleted('SHIPPED')">Shipped</div>
    <div class="status-line" [class.active]="isCompleted('DELIVERED')"></div>

    <div class="status-step" [class.active]="isCompleted('DELIVERED')">Delivered</div>

  </div>

  <p><b>Status:</b> {{order.status}}</p>
  <p><b>Total:</b> ₹{{order.totalAmount}}</p>

  <!-- ACTIONS -->
  <div class="flex gap-3 mt-4">

    <button *ngIf="order.status==='CONFIRMED'"
      class="btn-blue"
      (click)="payNow()">
      Pay Now
    </button>

    <button *ngIf="order.status==='CONFIRMED'"
      class="btn-red"
      (click)="cancelOrder()">
      Cancel Order
    </button>

    <button *ngIf="order.status==='DELIVERED'"
      class="btn-gray"
      (click)="downloadInvoice()">
      Download Invoice
    </button>

  </div>

  <hr class="my-5">

  <div *ngFor="let i of order.items" class="flex justify-between border-b py-2">
    <div>{{i.productName}}</div>
    <div>₹{{i.price}} x {{i.quantity}}</div>
  </div>

</div>
