<h2 class="text-xl font-bold mb-4">Checkout</h2>

<div *ngIf="loading">Loading addresses...</div>

<!-- Address List -->
<div *ngIf="!loading && addresses.length > 0">

  <div *ngFor="let a of addresses" class="border p-3 rounded mb-2 flex justify-between">

    <div>
      <p class="font-semibold">{{a.fullName}}</p>
      <p>{{a.street}}, {{a.city}}</p>
      <p>{{a.phone}}</p>
    </div>

    <div class="flex gap-2">
      <button class="text-blue-600" (click)="editAddress(a)">Edit</button>
      <button class="text-red-600" (click)="deleteAddress(a.id)">Delete</button>
    </div>

  </div>

  <button class="bg-green-600 text-white w-full py-2 rounded"
          [disabled]="!addressId"
          (click)="placeOrder()">Place Order</button>

</div>

<!-- No Address -->
<div *ngIf="!loading && addresses.length === 0">
  <p>No address found</p>
</div>

<button class="bg-blue-600 text-white px-4 py-2 rounded mt-3"
        (click)="showForm=true">Add Address</button>

<!-- Address Form -->
<div *ngIf="showForm" class="border p-4 mt-4 rounded space-y-2">

  <input [(ngModel)]="newAddress.fullName" placeholder="Full Name" class="input"/>
  <input [(ngModel)]="newAddress.phone" placeholder="Phone" class="input"/>
  <input [(ngModel)]="newAddress.street" placeholder="Street" class="input"/>
  <input [(ngModel)]="newAddress.city" placeholder="City" class="input"/>
  <input [(ngModel)]="newAddress.state" placeholder="State" class="input"/>
  <input [(ngModel)]="newAddress.zipCode" placeholder="Zip" class="input"/>

  <button class="bg-green-600 text-white w-full py-2 rounded"
          (click)="saveAddress()">Save</button>

</div>
