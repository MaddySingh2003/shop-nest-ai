<app-navbar></app-navbar>

<div class="bg-gray-100 min-h-screen py-10 px-4">

  <div class="max-w-6xl mx-auto">

    <h2 class="text-3xl font-bold mb-8">
      Checkout
    </h2>

    <div *ngIf="loading" class="text-center py-10">
      Loading...
    </div>

    <div *ngIf="!loading" class="grid md:grid-cols-3 gap-8">

      <!-- LEFT -->
      <div class="md:col-span-2">

        <h3 class="text-lg font-semibold mb-4">
          Select Delivery Address
        </h3>

        <div *ngFor="let a of addresses"
             (click)="addressId = a.id"
             class="bg-white p-5 mb-4 rounded shadow cursor-pointer"
             [class.border-black]="addressId === a.id">

          <p class="font-bold">{{a.fullName}}</p>
          <p>{{a.street}}, {{a.city}}</p>
          <p>{{a.state}} - {{a.zipCode}}</p>
          <p>{{a.phone}}</p>

        </div>

        <button (click)="showForm = true">
          + Add Address
        </button>

      </div>

      <!-- RIGHT -->
      <div class="bg-white p-6 rounded shadow">

        <h3 class="font-bold mb-4">Order Summary</h3>

        <div class="flex justify-between mb-2">
          <span>Subtotal</span>
          <span>₹ {{ total }}</span>
        </div>

        <div class="flex justify-between mb-2">
          <span>Shipping</span>
          <span class="text-green-600">Free</span>
        </div>

        <hr class="my-3">

        <div class="flex justify-between font-bold">
          <span>Total</span>
          <span>₹ {{ total }}</span>
        </div>

       <button
  class="w-full bg-black text-white py-2 mt-4 disabled:bg-gray-400"
  [disabled]="!addressId || total === 0 || outOfStock"
  (click)="placeOrder()">

  {{ outOfStock ? 'Out of Stock' : 'Place Order' }}

</button>
      </div>

    </div>

  </div>
</div>