<app-navbar></app-navbar>

<div class="min-h-screen bg-gradient-to-br from-gray-100 to-gray-200 py-12 px-4">

  <div class="max-w-7xl mx-auto">

    <!-- Page Title -->
    <div class="flex justify-between items-center mb-10">
      <h2 class="text-4xl font-bold text-gray-800 tracking-tight">
        Shopping Cart
      </h2>

      <span *ngIf="cart?.items?.length"
            class="bg-indigo-100 text-indigo-700 px-4 py-2 rounded-full text-sm font-medium">
        {{ cart.items.length }} Items
      </span>
    </div>

    <div *ngIf="cart?.items?.length > 0; else empty"
         class="grid lg:grid-cols-3 gap-10">

      <!-- LEFT SIDE - CART ITEMS -->
      <div class="lg:col-span-2 space-y-6">

        <div *ngFor="let item of cart.items"
             class="bg-white rounded-3xl shadow-md hover:shadow-xl transition duration-300 p-6 border border-gray-100">

          <div class="flex justify-between items-center">

            <!-- Product Info -->
            <div class="space-y-2">
              <h4 class="text-xl font-semibold text-gray-800">
                {{ item.productName }}
              </h4>

              <p class="text-indigo-600 font-medium text-lg">
                ‚Çπ {{ item.price }}
              </p>

              <button
                class="text-red-500 text-sm hover:text-red-700 transition font-medium"
                (click)="remove(item.itemId)">
                Remove Item
              </button>
            </div>

            <!-- Quantity + Total -->
            <div class="text-right">

              <!-- Quantity Controls -->
              <div class="flex items-center justify-end gap-4 mb-4">

                <button
                  class="w-9 h-9 flex items-center justify-center 
                         bg-gray-100 hover:bg-gray-200 rounded-full shadow-sm transition"
                  (click)="decrease(item)">
                  ‚àí
                </button>

                <span class="font-semibold text-xl text-gray-800">
                  {{ item.quantity }}
                </span>

                <button
                  class="w-9 h-9 flex items-center justify-center 
                         bg-gray-100 hover:bg-gray-200 rounded-full shadow-sm transition"
                  (click)="increase(item)">
                  +
                </button>

              </div>

              <p class="text-xl font-bold text-gray-900">
                ‚Çπ {{ item.price * item.quantity }}
              </p>

            </div>

          </div>

        </div>

      </div>

      <!-- RIGHT SIDE - ORDER SUMMARY -->
      <div class="bg-white rounded-3xl shadow-xl p-8 h-fit sticky top-24 border border-gray-100">

        <h3 class="text-2xl font-semibold mb-6 text-gray-800">
          Order Summary
        </h3>

        <div class="space-y-4 text-gray-600">

          <div class="flex justify-between">
            <span>Subtotal</span>
            <span>‚Çπ {{ total }}</span>
          </div>

          <div class="flex justify-between">
            <span>Shipping</span>
            <span class="text-green-600 font-medium">Free</span>
          </div>

          <div class="flex justify-between">
            <span>Discount</span>
            <span class="text-green-600 font-medium">- ‚Çπ 0</span>
          </div>

        </div>

        <hr class="my-6">

        <div class="flex justify-between text-xl font-bold text-gray-900">
          <span>Total</span>
          <span>‚Çπ {{ total }}</span>
        </div>

        <!-- Checkout Button -->
        <button
          routerLink="/checkout"
          class="w-full mt-8 bg-gradient-to-r from-indigo-600 to-purple-600 
                 hover:scale-105 transform transition duration-200
                 text-white py-4 rounded-2xl shadow-lg font-semibold text-lg">
          Proceed to Checkout
        </button>

        <!-- Clear Cart -->
        <button
          class="w-full border border-red-500 text-red-500 
                 hover:bg-red-50 py-3 rounded-2xl mt-4 transition font-medium"
          (click)="clearCart()">
          Clear Cart
        </button>

      </div>

    </div>

    <!-- EMPTY STATE -->
    <ng-template #empty>
      <div class="bg-white rounded-3xl shadow-xl p-16 text-center mt-16 border border-gray-100">

        <div class="text-7xl mb-6">üõçÔ∏è</div>

        <h3 class="text-2xl font-semibold text-gray-800 mb-3">
          Your Cart is Empty
        </h3>

        <p class="text-gray-500 mb-8">
          Looks like you haven't added anything yet.  
          Start shopping to fill it up!
        </p>

        <a routerLink="/home"
           class="bg-gradient-to-r from-indigo-600 to-purple-600 
                  text-white px-8 py-4 rounded-2xl 
                  hover:scale-105 transform transition shadow-lg font-semibold">
          Start Shopping
        </a>

      </div>
    </ng-template>

  </div>

</div>